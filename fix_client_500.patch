diff --git a/src/views/partials/public_header.ejs b/src/views/partials/public_header.ejs
--- a/src/views/partials/public_header.ejs
+++ b/src/views/partials/public_header.ejs
@@ -20,12 +20,5 @@
   const middleTransparent = middleBgNormalized === 'transparent'
     || middleBgNormalized === '#00000000'
     || middleBgNormalized === '#0000'
     || isTransparentRgba();
-  const middleBgNormalized = middleBg ? middleBg.replace(/\s+/g, '').toLowerCase() : '';
-  const middleTransparent = middleBgNormalized === 'transparent'
-    || middleBgNormalized === 'rgba(0,0,0,0)'
-    || /^rgba\(0,0,0,0(?:\.0+)?\)$/.test(middleBgNormalized)
-    || middleBgNormalized === '#00000000'
-    || middleBgNormalized === '#0000';
-  const middleTransparent = middleBgNormalized === 'transparent' || middleBgNormalized === 'rgba(0,0,0,0)';
 %>
diff --git a/src/config.js b/src/config.js
--- a/src/config.js
+++ b/src/config.js
@@ -23,7 +23,7 @@ const config = {

   // If you put this app behind HTTPS reverse proxy (Nginx/Caddy), set COOKIE_SECURE=true
   cookieSecure: env('COOKIE_SECURE', 'false') === 'true',
-  trustProxy: envInt('TRUST_PROXY', 0),
+  trustProxy: envInt('TRUST_PROXY', 1),

   bootstrapAdminUsername: env('BOOTSTRAP_ADMIN_USERNAME', ''),
   bootstrapAdminPassword: env('BOOTSTRAP_ADMIN_PASSWORD', ''),
